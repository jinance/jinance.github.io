<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>VWAP（VolumeProfile + Session） | jinance</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="交易,代码," />
  

  <meta name="description" content="12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697989910010110210">
<meta property="og:type" content="article">
<meta property="og:title" content="VWAP（VolumeProfile + Session）">
<meta property="og:url" content="http://yoursite.com/2025/202501004/index.html">
<meta property="og:site_name" content="jinance">
<meta property="og:description" content="12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697989910010110210">
<meta property="og:locale">
<meta property="article:published_time" content="2025-01-19T14:17:45.000Z">
<meta property="article:modified_time" content="2025-01-19T14:28:32.588Z">
<meta property="article:author" content="jinance">
<meta property="article:tag" content="交易">
<meta property="article:tag" content="代码">
<meta name="twitter:card" content="summary">

  

  
    <link rel="icon" href="/images/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    
<link rel="stylesheet" href="/css/personal-style.css">

  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-38189205-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  


<!-- 引入math公式库 20240723 -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<!-- 引入雪花特效 20240723 -->
<script src="/js/snow.js"></script>
<script>
  // 初始化雪花特效
  snowfall.snow(document.body, {
    flakeCount: 100, // 雪花数量
    flakeColor: "#fff", // 雪花颜色
    minSize: 2, // 雪花最小尺寸
    maxSize: 5, // 雪花最大尺寸
    round: true // 雪花是否为圆形
  });
</script>

<meta name="generator" content="Hexo 7.0.0"></head>

<body>

<script type="text/javascript" src="http://libs.baidu.com/jquery/1.8.3/jquery.js"></script>
<script type="text/javascript" src="http://libs.baidu.com/jquery/1.8.3/jquery.min.js"></script>

  
    <span id="toolbox-mobile" class="toolbox-mobile">首页</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">首页</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            rel="noopener noreferrer"
            target="_self"
            >
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>




<div class="content content-post CENTER">
   <article id="post-202501004" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">VWAP（VolumeProfile + Session）</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2025.01.19</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>jinance</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br></pre></td><td class="code"><pre><span class="line">//@version=6</span><br><span class="line">indicator(title = &#x27;✘&#x27;, shorttitle = &#x27;✘&#x27;, overlay = true, max_bars_back = 5000, max_polylines_count = 100, max_boxes_count = 500, max_labels_count = 500, max_lines_count = 500)</span><br><span class="line"></span><br><span class="line">VWAP_Ctl = &#x27;VWAP&#x27;</span><br><span class="line">// VWAP #1 Settings</span><br><span class="line">VWAP1_Settings = &#x27;VWAP #1 Settings&#x27;</span><br><span class="line">VWAP1_Ctl = input(false, title = &#x27;&#x27;, group = VWAP_Ctl, inline = VWAP1_Settings, display = display.data_window)</span><br><span class="line">Anchor1 = input.string(defval = &#x27;Quarter&#x27;, title = &#x27;&#x27;, group = VWAP_Ctl, inline = VWAP1_Settings, options = [&#x27;Day&#x27;, &#x27;Week&#x27;, &#x27;Month&#x27;, &#x27;Quarter&#x27;, &#x27;Year&#x27;])</span><br><span class="line">VWAP1_Col = input.color(defval = color.rgb(255, 183, 77, 60), title = &#x27;VWAP&#x27;, group = VWAP_Ctl, inline = VWAP1_Settings)</span><br><span class="line">Bands1_Col = input.color(defval = color.rgb(255, 183, 77, 60), title = &#x27;Bands&#x27;, group = VWAP_Ctl, inline = VWAP1_Settings)</span><br><span class="line">VWAP1_Bgc = input.color(defval = color.rgb(255, 183, 77, 95), title = &#x27;Fill&#x27;, group = VWAP_Ctl, inline = VWAP1_Settings)</span><br><span class="line"></span><br><span class="line">// VWAP #2 Settings</span><br><span class="line">VWAP2_Settings = &#x27;VWAP #2 Settings&#x27;</span><br><span class="line">VWAP2_Ctl = input(false, title = &#x27;&#x27;, group = VWAP_Ctl, inline = VWAP2_Settings, display = display.data_window)</span><br><span class="line">Anchor2 = input.string(defval = &#x27;Month&#x27;, title = &#x27;&#x27;, group = VWAP_Ctl, inline = VWAP2_Settings, options = [&#x27;Day&#x27;, &#x27;Week&#x27;, &#x27;Month&#x27;, &#x27;Quarter&#x27;, &#x27;Year&#x27;])</span><br><span class="line">VWAP2_Col = input.color(defval = color.rgb(91, 156, 246, 60), title = &#x27;VWAP&#x27;, group = VWAP_Ctl, inline = VWAP2_Settings)</span><br><span class="line">Bands2_Col = input.color(defval = color.rgb(91, 156, 246, 60), title = &#x27;Bands&#x27;, group = VWAP_Ctl, inline = VWAP2_Settings)</span><br><span class="line">VWAP2_Bgc = input.color(defval = color.rgb(91, 156, 246, 95), title = &#x27;Fill&#x27;, group = VWAP_Ctl, inline = VWAP2_Settings)</span><br><span class="line"></span><br><span class="line">// VWAP #3 Settings</span><br><span class="line">VWAP3_Settings = &#x27;VWAP #3 Settings&#x27;</span><br><span class="line">VWAP3_Ctl = input(false, title = &#x27;&#x27;, group = VWAP_Ctl, inline = VWAP3_Settings, display = display.data_window)</span><br><span class="line">Anchor3 = input.string(defval = &#x27;Week&#x27;, title = &#x27;&#x27;, group = VWAP_Ctl, inline = VWAP3_Settings, options = [&#x27;Day&#x27;, &#x27;Week&#x27;, &#x27;Month&#x27;, &#x27;Quarter&#x27;, &#x27;Year&#x27;])</span><br><span class="line">VWAP3_Col = input.color(defval = color.rgb(133, 227, 167, 60), title = &#x27;VWAP&#x27;, group = VWAP_Ctl, inline = VWAP3_Settings)</span><br><span class="line">Bands3_Col = input.color(defval = color.rgb(133, 227, 167, 60), title = &#x27;Bands&#x27;, group = VWAP_Ctl, inline = VWAP3_Settings)</span><br><span class="line">VWAP3_Bgc = input.color(defval = color.rgb(133, 227, 167, 95), title = &#x27;Fill&#x27;, group = VWAP_Ctl, inline = VWAP3_Settings)</span><br><span class="line"></span><br><span class="line">// VWAP #4 Settings</span><br><span class="line">VWAP4_Settings = &#x27;VWAP #4 Settings&#x27;</span><br><span class="line">VWAP4_Ctl = input(false, title = &#x27;&#x27;, group = VWAP_Ctl, inline = VWAP4_Settings, display = display.data_window)</span><br><span class="line">Anchor4 = input.string(defval = &#x27;Day&#x27;, title = &#x27;&#x27;, group = VWAP_Ctl, inline = VWAP4_Settings, options = [&#x27;Day&#x27;, &#x27;Week&#x27;, &#x27;Month&#x27;, &#x27;Quarter&#x27;, &#x27;Year&#x27;])</span><br><span class="line">VWAP4_Col = input.color(defval = color.rgb(255, 255, 255, 60), title = &#x27;VWAP&#x27;, group = VWAP_Ctl, inline = VWAP4_Settings)</span><br><span class="line">Bands4_Col = input.color(defval = color.rgb(255, 255, 255, 60), title = &#x27;Bands&#x27;, group = VWAP_Ctl, inline = VWAP4_Settings)</span><br><span class="line">VWAP4_Bgc = input.color(defval = color.rgb(255, 255, 255, 95), title = &#x27;Fill&#x27;, group = VWAP_Ctl, inline = VWAP4_Settings)</span><br><span class="line"></span><br><span class="line">Src = hlc3</span><br><span class="line"></span><br><span class="line">// Function to calculate new period</span><br><span class="line">f_is_new_period(anchor) =&gt;</span><br><span class="line">    switch anchor</span><br><span class="line">        &#x27;Day&#x27; =&gt; timeframe.change(&#x27;D&#x27;)</span><br><span class="line">        &#x27;Week&#x27; =&gt; timeframe.change(&#x27;W&#x27;)</span><br><span class="line">        &#x27;Month&#x27; =&gt; timeframe.change(&#x27;M&#x27;)</span><br><span class="line">        &#x27;Quarter&#x27; =&gt; timeframe.change(&#x27;3M&#x27;)</span><br><span class="line">        &#x27;Year&#x27; =&gt; timeframe.change(&#x27;12M&#x27;)</span><br><span class="line">        =&gt; false</span><br><span class="line"></span><br><span class="line">// Function to calculate VWAP and Bands</span><br><span class="line">f_calculate_vwap(src, is_active, is_new_period) =&gt;</span><br><span class="line">    var float vwap = na</span><br><span class="line">    var float band_upper = na</span><br><span class="line">    var float band_lower = na</span><br><span class="line"></span><br><span class="line">    if is_active and not timeframe.isdwm</span><br><span class="line">        [_vwap, _stdev_upper, _] = ta.vwap(src, is_new_period, 1)</span><br><span class="line">        stdev_abs = _stdev_upper - _vwap</span><br><span class="line">        vwap := _vwap</span><br><span class="line">        band_upper := vwap + stdev_abs</span><br><span class="line">        band_lower := vwap - stdev_abs</span><br><span class="line"></span><br><span class="line">    [vwap, band_upper, band_lower]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// VWAP Calculations</span><br><span class="line">[vwap1, band1_upper, band1_lower] = f_calculate_vwap(Src, VWAP1_Ctl, f_is_new_period(Anchor1))</span><br><span class="line">[vwap2, band2_upper, band2_lower] = f_calculate_vwap(Src, VWAP2_Ctl, f_is_new_period(Anchor2))</span><br><span class="line">[vwap3, band3_upper, band3_lower] = f_calculate_vwap(Src, VWAP3_Ctl, f_is_new_period(Anchor3))</span><br><span class="line">[vwap4, band4_upper, band4_lower] = f_calculate_vwap(Src, VWAP4_Ctl, f_is_new_period(Anchor4))</span><br><span class="line"></span><br><span class="line">// Plot VWAP and Bands</span><br><span class="line">vwap_plot1 = plot(VWAP1_Ctl ? vwap1 : na, color=VWAP1_Col)</span><br><span class="line">lowerBand_1 = plot(VWAP1_Ctl ? band1_lower : na, color=Bands1_Col)</span><br><span class="line">upperBand_1 = plot(VWAP1_Ctl ? band1_upper : na, color=Bands1_Col)</span><br><span class="line">fill(upperBand_1, lowerBand_1, color=VWAP1_Bgc)</span><br><span class="line"></span><br><span class="line">vwap_plot2 = plot(VWAP2_Ctl ? vwap2 : na, color=VWAP2_Col)</span><br><span class="line">lowerBand_2 = plot(VWAP2_Ctl ? band2_lower : na, color=Bands2_Col)</span><br><span class="line">upperBand_2 = plot(VWAP2_Ctl ? band2_upper : na, color=Bands2_Col)</span><br><span class="line">fill(upperBand_2, lowerBand_2, color=VWAP2_Bgc)</span><br><span class="line"></span><br><span class="line">vwap_plot3 = plot(VWAP3_Ctl ? vwap3 : na, color=VWAP3_Col)</span><br><span class="line">lowerBand_3 = plot(VWAP3_Ctl ? band3_lower : na, color=Bands3_Col)</span><br><span class="line">upperBand_3 = plot(VWAP3_Ctl ? band3_upper : na, color=Bands3_Col)</span><br><span class="line">fill(upperBand_3, lowerBand_3, color=VWAP3_Bgc)</span><br><span class="line"></span><br><span class="line">vwap_plot4 = plot(VWAP4_Ctl ? vwap4 : na, color=VWAP4_Col)</span><br><span class="line">lowerBand_4 = plot(VWAP4_Ctl ? band4_lower : na, color=Bands4_Col)</span><br><span class="line">upperBand_4 = plot(VWAP4_Ctl ? band4_upper : na, color=Bands4_Col)</span><br><span class="line">fill(upperBand_4, lowerBand_4, color=VWAP4_Bgc)</span><br><span class="line"></span><br><span class="line">// Stocks Markets Sessions</span><br><span class="line">YourTZ = input.string(&#x27;UTC+8:00&#x27;, &#x27;Time Zone&#x27;, group = &#x27;Basic Setting&#x27;)</span><br><span class="line">DaysToShow = input.int(3, &#x27;Days to Show&#x27;, minval = 1, group = &#x27;Basic Setting&#x27;)</span><br><span class="line">Offset = input.int(18, &#x27;Key Level Offset&#x27;, minval = 1, group = &#x27;Basic Setting&#x27;)</span><br><span class="line"></span><br><span class="line">SessionsGrp = &#x27;Stocks Markets Sessions&#x27;</span><br><span class="line">//Session Tokyo</span><br><span class="line">sesTokyo_color = input.color(color.rgb(91, 156, 246), &#x27;&#x27;, inline = &#x27;tokyo&#x27;, group = SessionsGrp)</span><br><span class="line">show_sesTokyo = input(true, &#x27;Tokyo    &#x27;, inline = &#x27;tokyo&#x27;, group = SessionsGrp)</span><br><span class="line">rangeTokyo = input.string(&#x27;1h&#x27;, &#x27;&#x27;, options = [&#x27;5m&#x27;, &#x27;15m&#x27;, &#x27;30m&#x27;, &#x27;1h&#x27;, &#x27;Session&#x27;], inline = &#x27;tokyo&#x27;, group = SessionsGrp)</span><br><span class="line"></span><br><span class="line">sesLondon_color = input.color(#ACBBE8, &#x27;&#x27;, inline = &#x27;london&#x27;, group = SessionsGrp)</span><br><span class="line">show_sesLondon = input(false, &#x27;London   &#x27;, inline = &#x27;london&#x27;, group = SessionsGrp)</span><br><span class="line">rangeLondon = input.string(&#x27;Session&#x27;, &#x27;&#x27;, options = [&#x27;5m&#x27;, &#x27;15m&#x27;, &#x27;30m&#x27;, &#x27;1h&#x27;, &#x27;Session&#x27;], inline = &#x27;london&#x27;, group = SessionsGrp)</span><br><span class="line"></span><br><span class="line">//Session NewYork</span><br><span class="line">sesNewYork_color = input.color(#C5ACE8, &#x27;&#x27;, inline = &#x27;newyork&#x27;, group = SessionsGrp)</span><br><span class="line">show_sesNewYork = input(false, &#x27;NewYork  &#x27;, inline = &#x27;newyork&#x27;, group = SessionsGrp)</span><br><span class="line">rangeNewYork = input.string(&#x27;Session&#x27;, &#x27;&#x27;, options = [&#x27;5m&#x27;, &#x27;15m&#x27;, &#x27;30m&#x27;, &#x27;1h&#x27;, &#x27;Session&#x27;], inline = &#x27;newyork&#x27;, group = SessionsGrp)</span><br><span class="line"></span><br><span class="line">//Info Table</span><br><span class="line">Show_Info_Table = input(false, &#x27;Info Table&#x27;, group = &#x27;Table&#x27;)</span><br><span class="line">TableTextColor = input.color(color.rgb(225, 255, 255), &#x27;Table Text Color&#x27;)</span><br><span class="line">Size = input.string(size.small, &#x27;Table Text Size&#x27;, options = [size.small, size.normal])</span><br><span class="line">Position = input.string(position.top_right, &#x27;Table Position&#x27;, options = [position.top_left, position.top_center, position.top_right, position.middle_left, position.middle_center, position.middle_right, position.bottom_left, position.bottom_center, position.bottom_right])</span><br><span class="line"></span><br><span class="line">tfMultiplier = timeframe.multiplier</span><br><span class="line">enabledSessions = (show_sesTokyo ? 1 : 0) + (show_sesLondon ? 1 : 0) + (show_sesNewYork ? 1 : 0)</span><br><span class="line">var array&lt;box&gt; boxesArray = array.new&lt;box&gt;()</span><br><span class="line">//Session Timing</span><br><span class="line">var string Tokyo = &#x27;0900-1500&#x27;</span><br><span class="line">var string London = &#x27;0800-1630&#x27;</span><br><span class="line">var string NewYork = &#x27;0930-1600&#x27;</span><br><span class="line"></span><br><span class="line">// Tokyo Range</span><br><span class="line">var string Tokyo_Range = rangeTokyo == &#x27;5m&#x27; ? &#x27;0900-0905&#x27; : rangeTokyo == &#x27;15m&#x27; ? &#x27;0900-0915&#x27; : rangeTokyo == &#x27;30m&#x27; ? &#x27;0900-0930&#x27; : rangeTokyo == &#x27;1h&#x27; ? &#x27;0900-1000&#x27; : Tokyo</span><br><span class="line">// London Range</span><br><span class="line">var string London_Range = rangeLondon == &#x27;5m&#x27; ? &#x27;0800-0805&#x27; : rangeLondon == &#x27;15m&#x27; ? &#x27;0800-0815&#x27; : rangeLondon == &#x27;30m&#x27; ? &#x27;0800-0830&#x27; : rangeLondon == &#x27;1h&#x27; ? &#x27;0800-0900&#x27; : London</span><br><span class="line"></span><br><span class="line">// New York Range</span><br><span class="line">var string NewYork_Range = rangeNewYork == &#x27;5m&#x27; ? &#x27;0930-0935&#x27; : rangeNewYork == &#x27;15m&#x27; ? &#x27;0930-0945&#x27; : rangeNewYork == &#x27;30m&#x27; ? &#x27;0930-1000&#x27; : rangeNewYork == &#x27;1h&#x27; ? &#x27;0930-1030&#x27; : NewYork</span><br><span class="line"></span><br><span class="line">TokyoTZ = &#x27;Asia/Tokyo&#x27;</span><br><span class="line">LondonTZ = &#x27;Europe/London&#x27;</span><br><span class="line">NewYorkTZ = &#x27;America/New_York&#x27;</span><br><span class="line"></span><br><span class="line">On_sesTokyo = math.sign(nz(time(timeframe.period, Tokyo, TokyoTZ)))</span><br><span class="line">On_sesLondon = math.sign(nz(time(timeframe.period, London, LondonTZ)))</span><br><span class="line">On_sesNewYork = math.sign(nz(time(timeframe.period, NewYork, NewYorkTZ)))</span><br><span class="line"></span><br><span class="line">On_rangeTokyo = math.sign(nz(time(timeframe.period, Tokyo_Range, TokyoTZ)))</span><br><span class="line">On_rangeLondon = math.sign(nz(time(timeframe.period, London_Range, LondonTZ)))</span><br><span class="line">On_rangeNewyork = math.sign(nz(time(timeframe.period, NewYork_Range, NewYorkTZ)))</span><br><span class="line"></span><br><span class="line">//High &amp; Low Session Detector </span><br><span class="line">LowHighSessionDetector(On_Range, On_Session, Color_Session) =&gt;</span><br><span class="line">    var int Bar = 0</span><br><span class="line">    var float High = 0.0</span><br><span class="line">    var float Low = 0.0</span><br><span class="line">    var box BoX = na</span><br><span class="line"></span><br><span class="line">    if On_Range[1] == 0 and On_Range == 1</span><br><span class="line">        Bar := bar_index</span><br><span class="line">        High := high</span><br><span class="line">        Low := low</span><br><span class="line">        Low</span><br><span class="line">    else if On_Range[1] == 1 and On_Range == 1</span><br><span class="line">        High := math.max(high, High)</span><br><span class="line">        Low := math.min(low, Low)</span><br><span class="line">        Low</span><br><span class="line">    else if On_Session == 0</span><br><span class="line">        High := 0.0</span><br><span class="line">        Low := 0.0</span><br><span class="line">        Bar := 0</span><br><span class="line">        Bar</span><br><span class="line"></span><br><span class="line">    if On_Session &gt; On_Session[1] and str.tonumber(timeframe.period) &lt;= 60</span><br><span class="line">        BoX := box.new(bar_index, High, bar_index, Low, bgcolor = color.new(Color_Session, 85), border_color = color.new(Color_Session, 100), border_style = line.style_dotted)</span><br><span class="line">        array.push(boxesArray, BoX)</span><br><span class="line"></span><br><span class="line">        if array.size(boxesArray) &gt; DaysToShow * enabledSessions</span><br><span class="line">            box.delete(array.shift(boxesArray))</span><br><span class="line">    if On_Range[1] == 1 and On_Range == 1</span><br><span class="line">        box.set_top(BoX, High)</span><br><span class="line">        box.set_bottom(BoX, Low)</span><br><span class="line">    if On_Session[1] == 1 and On_Session == 1</span><br><span class="line">        box.set_right(BoX, bar_index)</span><br><span class="line">    if Color_Session == sesTokyo_color and not timeframe.change(&#x27;D&#x27;) and rangeTokyo != &#x27;Session&#x27;</span><br><span class="line">        box.set_right(BoX, bar_index)</span><br><span class="line"></span><br><span class="line">if show_sesTokyo</span><br><span class="line">    LowHighSessionDetector(On_rangeTokyo, On_sesTokyo, sesTokyo_color)</span><br><span class="line"></span><br><span class="line">if show_sesLondon</span><br><span class="line">    LowHighSessionDetector(On_rangeLondon, On_sesLondon, sesLondon_color)</span><br><span class="line"></span><br><span class="line">if show_sesNewYork</span><br><span class="line">    LowHighSessionDetector(On_rangeNewyork, On_sesNewYork, sesNewYork_color)</span><br><span class="line"></span><br><span class="line">//Info Table</span><br><span class="line"></span><br><span class="line">// Start and Enf Time in Info Table</span><br><span class="line">SplitFunction(x, TZ, YourTZ) =&gt;</span><br><span class="line">    Text = str.split(x, &#x27;-&#x27;)</span><br><span class="line">    STime = Text.size() &gt; 0 ? Text.get(0) : &#x27;0000&#x27;</span><br><span class="line">    ETime = Text.size() &gt; 0 ? Text.get(1) : &#x27;0000&#x27;</span><br><span class="line">    SHour = str.substring(STime, 0, 2)</span><br><span class="line">    SMin = str.substring(STime, 2, 4)</span><br><span class="line">    EHour = str.substring(ETime, 0, 2)</span><br><span class="line">    EMin = str.substring(ETime, 2, 4)</span><br><span class="line">    SUTCTimestamp = timestamp(TZ, year, month, dayofmonth, int(str.tonumber(SHour)), int(str.tonumber(SMin)), 0)</span><br><span class="line">    EUTCTimestamp = timestamp(TZ, year, month, dayofmonth, int(str.tonumber(EHour)), int(str.tonumber(EMin)), 0)</span><br><span class="line">    SconvertedHour = hour(SUTCTimestamp, YourTZ)</span><br><span class="line">    SconvertedMinute = minute(SUTCTimestamp, YourTZ)</span><br><span class="line">    EconvertedHour = hour(EUTCTimestamp, YourTZ)</span><br><span class="line">    EconvertedMinute = minute(EUTCTimestamp, YourTZ)</span><br><span class="line">    YourStart = str.tostring(SconvertedHour) + &#x27;:&#x27; + str.tostring(SconvertedMinute &lt; 10 ? &#x27;0&#x27; + str.tostring(SconvertedMinute) : str.tostring(SconvertedMinute))</span><br><span class="line">    YourEnd = str.tostring(EconvertedHour) + &#x27;:&#x27; + str.tostring(EconvertedMinute &lt; 10 ? &#x27;0&#x27; + str.tostring(EconvertedMinute) : str.tostring(EconvertedMinute))</span><br><span class="line"></span><br><span class="line">    Start = YourStart</span><br><span class="line">    End = YourEnd</span><br><span class="line">    [Start, End]</span><br><span class="line"></span><br><span class="line">[Tokyo_Start, Tokyo_End] = SplitFunction(Tokyo, TokyoTZ, YourTZ)</span><br><span class="line">[London_Start, London_End] = SplitFunction(London, LondonTZ, YourTZ)</span><br><span class="line">[NewYork_Start, NewYork_End] = SplitFunction(NewYork, NewYorkTZ, YourTZ)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var Info_Table = table.new(Position, 5, 11, bgcolor = color.rgb(255, 255, 255, 100), border_color = color.rgb(255, 255, 255, 90), border_width = 1, frame_color = #373a46, frame_width = 1)</span><br><span class="line"></span><br><span class="line">if Show_Info_Table</span><br><span class="line">    table.cell(Info_Table, 0, 1, &#x27;Session&#x27;, text_color = TableTextColor, text_size = Size)</span><br><span class="line">    table.cell(Info_Table, 1, 1, &#x27;Start(&#x27; + YourTZ + &#x27;)&#x27;, text_color = TableTextColor, text_size = Size)</span><br><span class="line">    table.cell(Info_Table, 2, 1, &#x27;End(&#x27; + YourTZ + &#x27;)&#x27;, text_color = TableTextColor, text_size = Size)</span><br><span class="line"></span><br><span class="line">    table.cell(Info_Table, 0, 2, &#x27;Tokyo&#x27;, text_color = sesTokyo_color, text_size = Size)</span><br><span class="line">    table.cell(Info_Table, 0, 3, &#x27;London&#x27;, text_color = sesLondon_color, text_size = Size)</span><br><span class="line">    table.cell(Info_Table, 0, 4, &#x27;NewYork&#x27;, text_color = sesNewYork_color, text_size = Size)</span><br><span class="line"></span><br><span class="line">    //Start Time</span><br><span class="line">    table.cell(Info_Table, 1, 2, Tokyo_Start, text_color = TableTextColor, text_size = Size)</span><br><span class="line">    table.cell(Info_Table, 1, 3, London_Start, text_color = TableTextColor, text_size = Size)</span><br><span class="line">    table.cell(Info_Table, 1, 4, NewYork_Start, text_color = TableTextColor, text_size = Size)</span><br><span class="line">    //End Time</span><br><span class="line">    table.cell(Info_Table, 2, 2, Tokyo_End, text_color = TableTextColor, text_size = Size)</span><br><span class="line">    table.cell(Info_Table, 2, 3, London_End, text_color = TableTextColor, text_size = Size)</span><br><span class="line">    table.cell(Info_Table, 2, 4, NewYork_End, text_color = TableTextColor, text_size = Size)</span><br><span class="line"></span><br><span class="line">var g_VP = &#x27;Volume Profile&#x27;</span><br><span class="line">enable_vp = input.bool(true, &#x27;Enable VP&#x27;, group = g_VP)</span><br><span class="line">show_vp = input.bool(true, &#x27;Show VP         &#x27;, inline = &#x27;VP&#x27;, tooltip = &#x27;Whether to show the volume profile&#x27;, group = g_VP)</span><br><span class="line">vp_color = input.color(color.rgb(93, 96, 107, 70), &#x27;&#x27;, inline = &#x27;VP&#x27;, group = g_VP)</span><br><span class="line">show_vpoc = input.bool(true, &#x27;Show VPOC      &#x27;, inline = &#x27;VPOC&#x27;, tooltip = &#x27;Whether to show the volume point of control (VPOC), or the level with the largest volume in a given volume profile&#x27;, group = g_VP)</span><br><span class="line">vpoc_color = input.color(color.rgb(240, 98, 146), &#x27;&#x27;, inline = &#x27;VPOC&#x27;, group = g_VP)</span><br><span class="line">rows = input.int(200, &#x27;Rows&#x27;, 0, 200, tooltip = &#x27;The number of price levels/rows that will be used to approximate the cumulative volume profile&#x27;, group = g_VP)</span><br><span class="line">tf = input.timeframe(&#x27;W&#x27;, &#x27;Profile Timeframe&#x27;, tooltip = &#x27;The aggregate timeframe that the volume profile represents&#x27;, group = g_VP)</span><br><span class="line">ltf = input.timeframe(&#x27;3&#x27;, &#x27;Resolution Timeframe&#x27;, tooltip = &#x27;The timeframe whose price data will be used to build the volume profile&#x27;, group = g_VP)</span><br><span class="line">extend = input.int(30, &#x27;Profile Extend %&#x27;, 0, 100, tooltip = &#x27;How much the volume profile should extend to the next session&#x27;, group = g_VP)</span><br><span class="line"></span><br><span class="line">var vpoc = array.new_line()</span><br><span class="line"></span><br><span class="line">var values = array.new_float()</span><br><span class="line">var x_vol = array.new_int()</span><br><span class="line">var y_vol = array.new_float()</span><br><span class="line"></span><br><span class="line">var PLA = array.new&lt;chart.point&gt;()</span><br><span class="line">var polyline PL = na</span><br><span class="line">var line temp_vpoc = na</span><br><span class="line">var line temp_line = na</span><br><span class="line">var label temp_label = na</span><br><span class="line"></span><br><span class="line">var int lb_idx = na</span><br><span class="line">var int lb_time = na</span><br><span class="line"></span><br><span class="line">ltf := timeframe.in_seconds(ltf) &lt;= timeframe.in_seconds() ? ltf : &#x27;&#x27;</span><br><span class="line">[ltf_H, ltf_L, ltf_V] = request.security_lower_tf(syminfo.tickerid, ltf, [high, low, volume])</span><br><span class="line"></span><br><span class="line">if not na(lb_idx) and enable_vp</span><br><span class="line">    lb = bar_index - lb_idx &gt; 0 ? bar_index - lb_idx : 1</span><br><span class="line"></span><br><span class="line">    y_max = ta.highest(high[1], lb)</span><br><span class="line">    y_min = ta.lowest(low[1], lb)</span><br><span class="line"></span><br><span class="line">    if timeframe.change(tf) or barstate.islast</span><br><span class="line">        x_vol.clear()</span><br><span class="line">        y_vol.clear()</span><br><span class="line">        values.clear()</span><br><span class="line"></span><br><span class="line">        for i = 0 to rows by 1</span><br><span class="line">            y = y_min + i * (y_max - y_min) / rows</span><br><span class="line">            x_vol.push(lb_time)</span><br><span class="line">            y_vol.push(y)</span><br><span class="line">            values.push(0)</span><br><span class="line"></span><br><span class="line">        for i = bar_index - lb_idx to 1 by 1</span><br><span class="line">            vol = ltf_V[i]</span><br><span class="line">            if vol.size() &gt; 0</span><br><span class="line">                for j = 0 to values.size() - 1 by 1</span><br><span class="line">                    temp = y_vol.get(j)</span><br><span class="line">                    for k = 0 to vol.size() - 1 by 1</span><br><span class="line">                        H = ltf_H[i]</span><br><span class="line">                        L = ltf_L[i]</span><br><span class="line">                        V = ltf_V[i]</span><br><span class="line">                        if H.get(k) &gt;= temp and L.get(k) &lt;= temp</span><br><span class="line">                            add = math.floor(V.get(k) / ((H.get(k) - L.get(k)) / (y_max - y_min) / rows))</span><br><span class="line">                            values.set(j, values.get(j) + add)</span><br><span class="line"></span><br><span class="line">        max_y = y_vol.get(values.indexof(values.max()))</span><br><span class="line">        sf = values.max() / (time[1] - lb_time) / (extend / 100)</span><br><span class="line"></span><br><span class="line">        for j = 0 to values.size() - 1 by 1</span><br><span class="line">            set = lb_time + math.floor(values.get(j) / sf)</span><br><span class="line">            x_vol.set(j, set)</span><br><span class="line"></span><br><span class="line">        PLA.clear()</span><br><span class="line">        PLA.push(chart.point.from_time(lb_time, y_min))</span><br><span class="line">        for i = 0 to x_vol.size() - 1 by 1</span><br><span class="line">            PLA.push(chart.point.from_time(x_vol.get(i), y_vol.get(i)))</span><br><span class="line">        PLA.push(chart.point.from_time(lb_time, y_max))</span><br><span class="line"></span><br><span class="line">        PL.delete()</span><br><span class="line">        if timeframe.change(tf)</span><br><span class="line">            polyline.new(PLA, curved = false, closed = true, line_color = show_vp ? vp_color : na, fill_color = show_vp ? vp_color : na, xloc = xloc.bar_time)</span><br><span class="line">            temp_vpoc.delete()</span><br><span class="line">            temp_line.delete()</span><br><span class="line">            temp_label.delete()</span><br><span class="line">            vpoc.unshift(line.new(lb_time, max_y, time, max_y, xloc = xloc.bar_time, color = show_vpoc ? vpoc_color : na, width = 1))</span><br><span class="line">        else</span><br><span class="line">            PL := polyline.new(PLA, curved = false, closed = true, line_color = show_vp ? vp_color : na, fill_color = show_vp ? vp_color : na, xloc = xloc.bar_time)</span><br><span class="line">            if na(temp_vpoc)</span><br><span class="line">                temp_vpoc := line.new(lb_time, max_y, time, max_y, xloc = xloc.bar_time, color = show_vpoc ? vpoc_color : na, width = 1)</span><br><span class="line">                temp_line := line.new(bar_index, max_y, bar_index + Offset, max_y, xloc = xloc.bar_index, color = show_vpoc ? vpoc_color : na, width = 1)</span><br><span class="line">                temp_label := label.new(bar_index + Offset, max_y, text = &quot;POC&quot;, tooltip = str.tostring(max_y, &quot;#.####&quot;), color = color.rgb(0, 0, 0, 100), textcolor = show_vpoc ? vpoc_color : na, style = label.style_label_left, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">                temp_vpoc</span><br><span class="line">            temp_vpoc.set_y1(max_y)</span><br><span class="line">            temp_vpoc.set_xy2(time, max_y)</span><br><span class="line">            temp_line.set_xy1(bar_index, max_y)</span><br><span class="line">            temp_line.set_xy2(bar_index + Offset, max_y)</span><br><span class="line">            temp_label.set_xy(bar_index + Offset, max_y)</span><br><span class="line"></span><br><span class="line">if timeframe.change(tf)</span><br><span class="line">    lb_idx := bar_index</span><br><span class="line">    lb_time := time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">VWAP_Grp = &#x27;VWAP Key Level&#x27;</span><br><span class="line">currentDailyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(255, 255, 255, 20), group = VWAP_Grp, inline = &#x27;daily1&#x27;)</span><br><span class="line">currentDaily = input.string(defval = &#x27;Day&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;daily1&#x27;, options = [&#x27;Day&#x27;])</span><br><span class="line">var bool enablecurrentDailyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;daily1&#x27;)</span><br><span class="line">var bool enablecurrentDailyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;daily1&#x27;)</span><br><span class="line">var bool enablecurrentDailyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;daily1&#x27;)</span><br><span class="line"></span><br><span class="line">var float lastdailyLower = na</span><br><span class="line">var float lastdailyUpper = na</span><br><span class="line">var int lastdailyStart = na</span><br><span class="line">var float lastdailyPOC = na</span><br><span class="line">lastdailyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(255, 255, 255, 20), group = VWAP_Grp, inline = &#x27;daily2&#x27;)</span><br><span class="line">lastdaily = input.string(defval = &#x27;↳&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;daily2&#x27;, options = [&#x27;↳&#x27;])</span><br><span class="line">var bool enablelastdailyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;daily2&#x27;)</span><br><span class="line">var bool enablelastdailyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;daily2&#x27;)</span><br><span class="line">var bool enablelastdailyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;daily2&#x27;)</span><br><span class="line"></span><br><span class="line">currentWeeklyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(133, 227, 167, 20), group = VWAP_Grp, inline = &#x27;weekly3&#x27;)</span><br><span class="line">currentWeekly = input.string(defval = &#x27;Week&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;weekly3&#x27;, options = [&#x27;Week&#x27;])</span><br><span class="line">var bool enablecurrentWeeklyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;weekly3&#x27;)</span><br><span class="line">var bool enablecurrentWeeklyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;weekly3&#x27;)</span><br><span class="line">var bool enablecurrentWeeklyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;weekly3&#x27;)</span><br><span class="line"></span><br><span class="line">var float lastWeeklyLower = na</span><br><span class="line">var float lastWeeklyUpper = na</span><br><span class="line">var int lastWeeklyStart = na</span><br><span class="line">var float lastWeeklyPOC = na</span><br><span class="line">lastWeeklyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(133, 227, 167, 20), group = VWAP_Grp, inline = &#x27;weekly1&#x27;)</span><br><span class="line">lastWeekly = input.string(defval = &#x27;↳&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;weekly1&#x27;, options = [&#x27;↳&#x27;])</span><br><span class="line">var bool enablelastWeeklyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;weekly1&#x27;)</span><br><span class="line">var bool enablelastWeeklyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;weekly1&#x27;)</span><br><span class="line">var bool enablelastWeeklyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;weekly1&#x27;)</span><br><span class="line"></span><br><span class="line">var float lastlastWeeklyLower = na</span><br><span class="line">var float lastlastWeeklyUpper = na</span><br><span class="line">var int lastlastWeeklyStart = na</span><br><span class="line">var float lastlastWeeklyPOC = na</span><br><span class="line">lastlastWeeklyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(133, 227, 167, 20), group = VWAP_Grp, inline = &#x27;weekly2&#x27;)</span><br><span class="line">lastlastWeekly = input.string(defval = &#x27;↳ ↳&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;weekly2&#x27;, options = [&#x27;↳ ↳&#x27;])</span><br><span class="line">var bool enablelastlastWeeklyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;weekly2&#x27;)</span><br><span class="line">var bool enablelastlastWeeklyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;weekly2&#x27;)</span><br><span class="line">var bool enablelastlastWeeklyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;weekly2&#x27;)</span><br><span class="line"></span><br><span class="line">currentMonthlyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(91, 156, 246, 20), group = VWAP_Grp, inline = &#x27;monthly3&#x27;)</span><br><span class="line">currentMonthly = input.string(defval = &#x27;Month&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;monthly3&#x27;, options = [&#x27;Month&#x27;])</span><br><span class="line">var bool enablecurrentMonthlyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;monthly3&#x27;)</span><br><span class="line">var bool enablecurrentMonthlyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;monthly3&#x27;)</span><br><span class="line">var bool enablecurrentMonthlyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;monthly3&#x27;)</span><br><span class="line"></span><br><span class="line">var float lastMonthlyLower = na</span><br><span class="line">var float lastMonthlyUpper = na</span><br><span class="line">var int lastMonthlyStart = na</span><br><span class="line">var float lastMonthlyPOC = na</span><br><span class="line">lastMonthlyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(91, 156, 246, 20), group = VWAP_Grp, inline = &#x27;monthly1&#x27;)</span><br><span class="line">lastMonthly = input.string(defval = &#x27;↳&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;monthly1&#x27;, options = [&#x27;↳&#x27;])</span><br><span class="line">var bool enablelastMonthlyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;monthly1&#x27;)</span><br><span class="line">var bool enablelastMonthlyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;monthly1&#x27;)</span><br><span class="line">var bool enablelastMonthlyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;monthly1&#x27;)</span><br><span class="line"></span><br><span class="line">var float lastlastMonthlyLower = na</span><br><span class="line">var float lastlastMonthlyUpper = na</span><br><span class="line">var int lastlastMonthlyStart = na</span><br><span class="line">var float lastlastMonthlyPOC = na</span><br><span class="line">lastlastMonthlyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(91, 156, 246, 20), group = VWAP_Grp, inline = &#x27;monthly2&#x27;)</span><br><span class="line">lastlastMonthly = input.string(defval = &#x27;↳ ↳&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;monthly2&#x27;, options = [&#x27;↳ ↳&#x27;])</span><br><span class="line">var bool enablelastlastMonthlyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;monthly2&#x27;)</span><br><span class="line">var bool enablelastlastMonthlyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;monthly2&#x27;)</span><br><span class="line">var bool enablelastlastMonthlyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;monthly2&#x27;)</span><br><span class="line"></span><br><span class="line">currentQuarterlyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(255, 183, 77, 20), group = VWAP_Grp, inline = &#x27;quarterly3&#x27;)</span><br><span class="line">currentQuarterly = input.string(defval = &#x27;Quarter&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;quarterly3&#x27;, options = [&#x27;Quarter&#x27;])</span><br><span class="line">var bool enablecurrentQuarterlyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;quarterly3&#x27;)</span><br><span class="line">var bool enablecurrentQuarterlyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;quarterly3&#x27;)</span><br><span class="line">var bool enablecurrentQuarterlyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;quarterly3&#x27;)</span><br><span class="line"></span><br><span class="line">var float lastQuarterlyLower = na</span><br><span class="line">var float lastQuarterlyUpper = na</span><br><span class="line">var int lastQuarterlyStart = na</span><br><span class="line">var float lastQuarterlyPOC = na</span><br><span class="line">lastQuarterlyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(255, 183, 77, 20), group = VWAP_Grp, inline = &#x27;quarterly1&#x27;)</span><br><span class="line">lastQuarterly = input.string(defval = &#x27;↳&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;quarterly1&#x27;, options = [&#x27;↳&#x27;])</span><br><span class="line">var bool enablelastQuarterlyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;quarterly1&#x27;)</span><br><span class="line">var bool enablelastQuarterlyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;quarterly1&#x27;)</span><br><span class="line">var bool enablelastQuarterlyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;quarterly1&#x27;)</span><br><span class="line"></span><br><span class="line">var float lastlastQuarterlyLower = na</span><br><span class="line">var float lastlastQuarterlyUpper = na</span><br><span class="line">var int lastlastQuarterlyStart = na</span><br><span class="line">var float lastlastQuarterlyPOC = na</span><br><span class="line">lastlastQuarterlyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(255, 183, 77, 20), group = VWAP_Grp, inline = &#x27;quarterly2&#x27;)</span><br><span class="line">lastlastQuarterly = input.string(defval = &#x27;↳ ↳&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;quarterly2&#x27;, options = [&#x27;↳ ↳&#x27;])</span><br><span class="line">var bool enablelastlastQuarterlyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;quarterly2&#x27;)</span><br><span class="line">var bool enablelastlastQuarterlyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;quarterly2&#x27;)</span><br><span class="line">var bool enablelastlastQuarterlyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;quarterly2&#x27;)</span><br><span class="line"></span><br><span class="line">currentyearlyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(240, 98, 146, 20), group = VWAP_Grp, inline = &#x27;yearly3&#x27;)</span><br><span class="line">currentyearly = input.string(defval = &#x27;Year&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;yearly3&#x27;, options = [&#x27;Year&#x27;])</span><br><span class="line">var bool enablecurrentyearlyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;yearly3&#x27;)</span><br><span class="line">var bool enablecurrentyearlyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;yearly3&#x27;)</span><br><span class="line">var bool enablecurrentyearlyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;yearly3&#x27;)</span><br><span class="line"></span><br><span class="line">var float lastYearlyLower = na</span><br><span class="line">var float lastYearlyUpper = na</span><br><span class="line">var int lastYearlyStart = na</span><br><span class="line">var float lastYearlyPOC = na</span><br><span class="line">lastYearlyColor = input.color(title = &#x27;&#x27;, defval = color.rgb(240, 98, 146, 20), group = VWAP_Grp, inline = &#x27;yearly1&#x27;)</span><br><span class="line">lastYearly = input.string(defval = &#x27;↳&#x27;, title = &#x27;&#x27;, group = VWAP_Grp, inline = &#x27;yearly1&#x27;, options = [&#x27;↳&#x27;])</span><br><span class="line">var bool enablelastYearlyLower = input.bool(false, title = &#x27;Lower&#x27;, group = VWAP_Grp, inline = &#x27;yearly1&#x27;)</span><br><span class="line">var bool enablelastYearlyPOC = input.bool(false, title = &#x27;VWAP&#x27;, group = VWAP_Grp, inline = &#x27;yearly1&#x27;)</span><br><span class="line">var bool enablelastYearlyUpper = input.bool(false, title = &#x27;Upper&#x27;, group = VWAP_Grp, inline = &#x27;yearly1&#x27;)</span><br><span class="line"></span><br><span class="line">label_color_setting = color.new(#ecf008, 100)</span><br><span class="line">right_bar = bar_index + Offset</span><br><span class="line">format_level = &#x27;#.####&#x27;</span><br><span class="line">var DEFAULT_LINE_STYLE = line.style_dotted</span><br><span class="line">var DEFAULT_LABEL_STYLE = label.style_label_left</span><br><span class="line"></span><br><span class="line">calcVWAP(src, isNewPeriod) =&gt;</span><br><span class="line">    [_vwap, _stdevUpper, _] = ta.vwap(src, isNewPeriod, 1)</span><br><span class="line">    stdevAbs = _stdevUpper - _vwap</span><br><span class="line">    upperBand = _vwap + stdevAbs * 1.0</span><br><span class="line">    lowerBand = _vwap - stdevAbs * 1.0</span><br><span class="line">    [_vwap, upperBand, lowerBand]</span><br><span class="line"></span><br><span class="line">[yearlyVWAP, yearlyUpper, yearlyLower] = calcVWAP(Src, timeframe.change(&#x27;12M&#x27;))</span><br><span class="line">[quarterlyVWAP, quarterlyUpper, quarterlyLower] = calcVWAP(Src, timeframe.change(&#x27;3M&#x27;))</span><br><span class="line">[monthlyVWAP, monthlyUpper, monthlyLower] = calcVWAP(Src, timeframe.change(&#x27;M&#x27;))</span><br><span class="line">[weeklyVWAP, weeklyUpper, weeklyLower] = calcVWAP(Src, timeframe.change(&#x27;W&#x27;))</span><br><span class="line">[dailyVWAP, dailyUpper, dailyLower] = calcVWAP(Src, timeframe.change(&#x27;D&#x27;))</span><br><span class="line"></span><br><span class="line">if timeframe.change(&#x27;3M&#x27;)</span><br><span class="line">    lastlastQuarterlyLower := lastQuarterlyLower</span><br><span class="line">    lastlastQuarterlyUpper := lastQuarterlyUpper</span><br><span class="line">    lastlastQuarterlyStart := lastQuarterlyStart</span><br><span class="line">    lastlastQuarterlyPOC := lastQuarterlyPOC</span><br><span class="line">    lastQuarterlyLower := quarterlyLower[1]</span><br><span class="line">    lastQuarterlyUpper := quarterlyUpper[1]</span><br><span class="line">    lastQuarterlyStart := bar_index[1]</span><br><span class="line">    lastQuarterlyPOC := quarterlyVWAP[1]</span><br><span class="line">    lastQuarterlyPOC</span><br><span class="line"></span><br><span class="line">if timeframe.change(&#x27;M&#x27;)</span><br><span class="line">    lastlastMonthlyLower := lastMonthlyLower</span><br><span class="line">    lastlastMonthlyUpper := lastMonthlyUpper</span><br><span class="line">    lastlastMonthlyStart := lastMonthlyStart</span><br><span class="line">    lastlastMonthlyPOC := lastMonthlyPOC</span><br><span class="line">    lastMonthlyLower := monthlyLower[1]</span><br><span class="line">    lastMonthlyUpper := monthlyUpper[1]</span><br><span class="line">    lastMonthlyStart := bar_index[1]</span><br><span class="line">    lastMonthlyPOC := monthlyVWAP[1]</span><br><span class="line">    lastMonthlyPOC</span><br><span class="line"></span><br><span class="line">if timeframe.change(&#x27;W&#x27;)</span><br><span class="line">    lastlastWeeklyLower := lastWeeklyLower</span><br><span class="line">    lastlastWeeklyUpper := lastWeeklyUpper</span><br><span class="line">    lastlastWeeklyStart := lastWeeklyStart</span><br><span class="line">    lastlastWeeklyPOC := lastWeeklyPOC</span><br><span class="line">    lastWeeklyLower := weeklyLower[1]</span><br><span class="line">    lastWeeklyUpper := weeklyUpper[1]</span><br><span class="line">    lastWeeklyStart := bar_index[1]</span><br><span class="line">    lastWeeklyPOC := weeklyVWAP[1]</span><br><span class="line">    lastWeeklyPOC</span><br><span class="line"></span><br><span class="line">if timeframe.change(&#x27;D&#x27;)</span><br><span class="line">    lastdailyLower := dailyLower[1]</span><br><span class="line">    lastdailyUpper := dailyUpper[1]</span><br><span class="line">    lastdailyStart := bar_index[1]</span><br><span class="line">    lastdailyPOC := dailyVWAP[1]</span><br><span class="line">    lastdailyPOC</span><br><span class="line"></span><br><span class="line">if timeframe.change(&quot;12M&quot;)</span><br><span class="line">    lastYearlyLower := yearlyLower[1]</span><br><span class="line">    lastYearlyUpper := yearlyUpper[1]</span><br><span class="line">    lastYearlyPOC :=  yearlyVWAP[1]</span><br><span class="line">    lastYearlyStart := bar_index[1]</span><br><span class="line">    lastYearlyStart</span><br><span class="line"></span><br><span class="line">if barstate.islast</span><br><span class="line">    // Daily</span><br><span class="line">    if enablelastdailyLower</span><br><span class="line">        var lastdailyLowerline = line.new(x1 = lastdailyStart, y1 = lastdailyLower, x2 = right_bar, y2 = lastdailyLower, color = lastdailyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastdailyLowerlabel = label.new(x = right_bar, y = lastdailyLower, text = &#x27;pdVWAP -1&#x27;, tooltip = str.tostring(lastdailyLower, format_level), color = label_color_setting, textcolor = lastdailyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastdailyUpper</span><br><span class="line">        var lastdailyUpperline = line.new(x1 = lastdailyStart, y1 = lastdailyUpper, x2 = right_bar, y2 = lastdailyUpper, color = lastdailyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastdailyUpperlabel = label.new(x = right_bar, y = lastdailyUpper, text = &#x27;pdVWAP +1&#x27;, tooltip = str.tostring(lastdailyUpper, format_level), color = label_color_setting, textcolor = lastdailyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastdailyPOC</span><br><span class="line">        var lastdailyPOCline = line.new(x1 = lastdailyStart, y1 = lastdailyPOC, x2 = right_bar, y2 = lastdailyPOC, color = lastdailyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastdailyPOClabel = label.new(x = right_bar, y = lastdailyPOC, text = &#x27;pdVWAP&#x27;, tooltip = str.tostring(lastdailyPOC, format_level), color = label_color_setting, textcolor = lastdailyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentDailyLower</span><br><span class="line">        var lastdailyLowerline = line.new(x1 = lastdailyStart, y1 = dailyLower, x2 = right_bar, y2 = dailyLower, color = currentDailyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastdailyLowerlabel = label.new(x = right_bar, y = dailyLower, text = &#x27;dVWAP -1&#x27;, tooltip = str.tostring(dailyLower, format_level), color = label_color_setting, textcolor = currentDailyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentDailyUpper</span><br><span class="line">        var lastdailyUpperline = line.new(x1 = lastdailyStart, y1 = dailyUpper, x2 = right_bar, y2 = dailyUpper, color = currentDailyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastdailyUpperlabel = label.new(x = right_bar, y = dailyUpper, text = &#x27;dVWAP +1&#x27;, tooltip = str.tostring(dailyUpper, format_level), color = label_color_setting, textcolor = currentDailyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentDailyPOC</span><br><span class="line">        var lastdailyPOCline = line.new(x1 = lastdailyStart, y1 = dailyVWAP, x2 = right_bar, y2 = dailyVWAP, color = currentDailyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastdailyPOClabel = label.new(x = right_bar, y = dailyVWAP, text = &#x27;dVWAP&#x27;, tooltip = str.tostring(dailyVWAP, format_level), color = label_color_setting, textcolor = currentDailyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    // Weekly</span><br><span class="line">    if enablelastWeeklyLower</span><br><span class="line">        var lastWeeklyLowerline = line.new(x1 = lastdailyStart, y1 = lastWeeklyLower, x2 = right_bar, y2 = lastWeeklyLower, color = lastWeeklyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastWeeklyLowerlabel = label.new(right_bar, y = lastWeeklyLower, text = &#x27;pwVWAP -1&#x27;, tooltip = str.tostring(lastWeeklyLower, format_level), color = label_color_setting, textcolor = lastWeeklyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastWeeklyUpper</span><br><span class="line">        var lastWeeklyUpperline = line.new(x1 = lastdailyStart, y1 = lastWeeklyUpper, x2 = right_bar, y2 = lastWeeklyUpper, color = lastWeeklyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastWeeklyUpperlabel = label.new(x = right_bar, y = lastWeeklyUpper, text = &#x27;pwVWAP +1&#x27;, tooltip = str.tostring(lastWeeklyUpper, format_level), color = label_color_setting, textcolor = lastWeeklyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastWeeklyPOC</span><br><span class="line">        var lastWeeklyPOCline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = lastWeeklyPOC, y2 = lastWeeklyPOC, color = lastWeeklyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastWeeklyPOClabel = label.new(x = right_bar, y = lastWeeklyPOC, text = &#x27;pwVWAP&#x27;, tooltip = str.tostring(lastWeeklyPOC, format_level), color = label_color_setting, textcolor = lastWeeklyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastlastWeeklyLower</span><br><span class="line">        var lastlastWeeklyLowerline = line.new(x1 = lastdailyStart, y1 = lastlastWeeklyLower, x2 = right_bar, y2 = lastlastWeeklyLower, color = lastlastWeeklyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastlastWeeklyLowerlabel = label.new(x = right_bar, y = lastlastWeeklyLower, text = &#x27;ppwVWAP -1&#x27;, tooltip = str.tostring(lastlastWeeklyLower, format_level), color = label_color_setting, textcolor = lastlastWeeklyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastlastWeeklyUpper</span><br><span class="line">        var lastlastWeeklyUpperline = line.new(x1 = lastdailyStart, y1 = lastlastWeeklyUpper, x2 = right_bar, y2 = lastlastWeeklyUpper, color = lastlastWeeklyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastlastWeeklyUpperlabel = label.new(x = right_bar, y = lastlastWeeklyUpper, text = &#x27;ppwVWAP +1&#x27;, tooltip = str.tostring(lastlastWeeklyUpper, format_level), color = label_color_setting, textcolor = lastlastWeeklyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastlastWeeklyPOC</span><br><span class="line">        var lastlastWeeklyPOCline = line.new(x1 = lastdailyStart, y1 = lastlastWeeklyPOC, x2 = right_bar, y2 = lastlastWeeklyPOC, color = lastlastWeeklyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastlastWeeklyPOClabel = label.new(x = right_bar, y = lastlastWeeklyPOC, text = &#x27;ppwVWAP&#x27;, tooltip = str.tostring(lastlastWeeklyPOC, format_level), color = label_color_setting, textcolor = lastlastWeeklyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentWeeklyLower</span><br><span class="line">        var currentWeeklyLowerline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = weeklyLower, y2 = weeklyLower, color = currentWeeklyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var currentWeeklyLowerlabel = label.new(x = right_bar, y = weeklyLower, text = &#x27;wVWAP -1&#x27;, tooltip = str.tostring(weeklyLower, format_level), color = label_color_setting, textcolor = currentWeeklyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentWeeklyPOC</span><br><span class="line">        var currentWeeklyPOCline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = weeklyVWAP, y2 = weeklyVWAP, color = currentWeeklyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var currentWeeklyPOClabel = label.new(x = right_bar, y = weeklyVWAP, text = &#x27;wVWAP&#x27;, tooltip = str.tostring(weeklyVWAP, format_level), color = label_color_setting, textcolor = currentWeeklyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentWeeklyUpper</span><br><span class="line">        var currentWeeklyUpperline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = weeklyUpper, y2 = weeklyUpper, color = currentWeeklyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var currentWeeklyUpperlabel = label.new(x = right_bar, y = weeklyUpper, text = &#x27;wVWAP +1&#x27;, tooltip = str.tostring(weeklyUpper, format_level), color = label_color_setting, textcolor = currentWeeklyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    // Monthly</span><br><span class="line">    if enablelastMonthlyLower</span><br><span class="line">        var lastMonthlyLowerline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = lastMonthlyLower, y2 = lastMonthlyLower, color = lastMonthlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastMonthlyLowerlabel = label.new(x = right_bar, y = lastMonthlyLower, text = &#x27;pmVWAP -1&#x27;, tooltip = str.tostring(lastMonthlyLower, format_level), color = label_color_setting, textcolor = lastMonthlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastMonthlyUpper</span><br><span class="line">        var lastMonthlyUpperline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = lastMonthlyUpper, y2 = lastMonthlyUpper, color = lastMonthlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastMonthlyUpperlabel = label.new(x = right_bar, y = lastMonthlyUpper, text = &#x27;pmVWAP +1&#x27;, tooltip = str.tostring(lastMonthlyUpper, format_level), color = label_color_setting, textcolor = lastMonthlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastMonthlyPOC</span><br><span class="line">        var lastMonthlyPOCline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = lastMonthlyPOC, y2 = lastMonthlyPOC, color = lastMonthlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastMonthlyPOClabel = label.new(x = right_bar, y = lastMonthlyPOC, text = &#x27;pmVWAP&#x27;, tooltip = str.tostring(lastMonthlyPOC, format_level), color = label_color_setting, textcolor = lastMonthlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastlastMonthlyLower</span><br><span class="line">        var lastlastMonthlyLowerline = line.new(x1 = lastdailyStart, y1 = lastlastMonthlyLower, x2 = right_bar, y2 = lastlastMonthlyLower, color = lastlastMonthlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastlastMonthlyLowerlabel = label.new(x = right_bar, y = lastlastMonthlyLower, text = &#x27;ppmVWAP -1&#x27;, tooltip = str.tostring(lastlastMonthlyLower, format_level), color = label_color_setting, textcolor = lastlastMonthlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastlastMonthlyUpper</span><br><span class="line">        var lastlastMonthlyUpperline = line.new(x1 = lastdailyStart, y1 = lastlastMonthlyUpper, x2 = right_bar, y2 = lastlastMonthlyUpper, color = lastlastMonthlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastlastMonthlyUpperlabel = label.new(x = right_bar, y = lastlastMonthlyUpper, text = &#x27;ppmVWAP +1&#x27;, tooltip = str.tostring(lastlastMonthlyUpper, format_level), color = label_color_setting, textcolor = lastlastMonthlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastlastMonthlyPOC</span><br><span class="line">        var lastlastMonthlyPOCline = line.new(x1 = lastdailyStart, y1 = lastlastMonthlyPOC, x2 = right_bar, y2 = lastlastMonthlyPOC, color = lastlastMonthlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastlastMonthlyPOClabel = label.new(x = right_bar, y = lastlastMonthlyPOC, text = &#x27;ppmVWAP&#x27;, tooltip = str.tostring(lastlastMonthlyPOC, format_level), color = label_color_setting, textcolor = lastlastMonthlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentMonthlyLower</span><br><span class="line">        var currentMonthlyLowerline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = monthlyLower, y2 = monthlyLower, color = currentMonthlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var currentMonthlyLowerlabel = label.new(x = right_bar, y = monthlyLower, text = &#x27;mVWAP -1&#x27;, tooltip = str.tostring(monthlyLower, format_level), color = label_color_setting, textcolor = currentMonthlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentMonthlyPOC</span><br><span class="line">        var currentMonthlyPOCline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = monthlyVWAP, y2 = monthlyVWAP, color = currentMonthlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var currentMonthlyPOClabel = label.new(x = right_bar, y = monthlyVWAP, text = &#x27;mVWAP&#x27;, tooltip = str.tostring(monthlyVWAP, format_level), color = label_color_setting, textcolor = currentMonthlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentMonthlyUpper</span><br><span class="line">        var currentMonthlyUpperline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = monthlyUpper, y2 = monthlyUpper, color = currentMonthlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var currentMonthlyUpperlabel = label.new(x = right_bar, y = monthlyUpper, text = &#x27;mVWAP +1&#x27;, tooltip = str.tostring(monthlyUpper, format_level), color = label_color_setting, textcolor = currentMonthlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    // QUATERLY</span><br><span class="line">    if enablelastQuarterlyLower</span><br><span class="line">        var lastQuarterlyLowerline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = lastQuarterlyLower, y2 = lastQuarterlyLower, color = lastQuarterlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastQuarterlyLowerlabel = label.new(x = right_bar, y = lastQuarterlyLower, text = &#x27;pqVWAP -1&#x27;, tooltip = str.tostring(lastQuarterlyLower, format_level), color = label_color_setting, textcolor = lastQuarterlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastQuarterlyUpper</span><br><span class="line">        var lastQuarterlyUpperline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = lastQuarterlyUpper, y2 = lastQuarterlyUpper, color = lastQuarterlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastQuarterlyUpperlabel = label.new(x = right_bar, y = lastQuarterlyUpper, text = &#x27;pqVWAP +1&#x27;, tooltip = str.tostring(lastQuarterlyUpper, format_level), color = label_color_setting, textcolor = lastQuarterlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastQuarterlyPOC</span><br><span class="line">        var lastQuarterlyPOCline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = lastQuarterlyPOC, y2 = lastQuarterlyPOC, color = lastQuarterlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastQuarterlyPOClabel = label.new(x = right_bar, y = lastQuarterlyPOC, text = &#x27;pqVWAP&#x27;, tooltip = str.tostring(lastQuarterlyPOC, format_level), color = label_color_setting, textcolor = lastQuarterlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastlastQuarterlyLower</span><br><span class="line">        var lastlastQuarterlyLowerline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = lastlastQuarterlyLower, y2 = lastlastQuarterlyLower, color = lastlastQuarterlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastlastQuarterlyLowerlabel = label.new(x = right_bar, y = lastlastQuarterlyLower, text = &#x27;ppqVWAP -1&#x27;, tooltip = str.tostring(lastlastQuarterlyLower, format_level), color = label_color_setting, textcolor = lastlastQuarterlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastlastQuarterlyUpper</span><br><span class="line">        var lastlastQuarterlyUpperline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = lastlastQuarterlyUpper, y2 = lastlastQuarterlyUpper, color = lastlastQuarterlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastlastQuarterlyUpperlabel = label.new(x = right_bar, y = lastlastQuarterlyUpper, text = &#x27;ppqVWAP +1&#x27;, tooltip = str.tostring(lastlastQuarterlyUpper, format_level), color = label_color_setting, textcolor = lastlastQuarterlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastlastQuarterlyPOC</span><br><span class="line">        var lastlastQuarterlyPOCline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = lastlastQuarterlyPOC, y2 = lastlastQuarterlyPOC, color = lastlastQuarterlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastlastQuarterlyPOClabel = label.new(x = right_bar, y = lastlastQuarterlyPOC, text = &#x27;ppqVWAP&#x27;, tooltip = str.tostring(lastlastQuarterlyPOC, format_level), color = label_color_setting, textcolor = lastlastQuarterlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentQuarterlyLower</span><br><span class="line">        var currentQuarterlyLowerline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = quarterlyLower, y2 = quarterlyLower, color = currentQuarterlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var currentQuarterlyLowerlabel = label.new(x = right_bar, y = quarterlyLower, text = &#x27;qVWAP -1&#x27;, tooltip = str.tostring(quarterlyLower, format_level), color = label_color_setting, textcolor = currentQuarterlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentQuarterlyPOC</span><br><span class="line">        var currentQuarterlyPOCline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = quarterlyVWAP, y2 = quarterlyVWAP, color = currentQuarterlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var currentQuarterlyPOClabel = label.new(x = right_bar, y = quarterlyVWAP, text = &#x27;qVWAP&#x27;, tooltip = str.tostring(quarterlyVWAP, format_level), color = label_color_setting, textcolor = currentQuarterlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentQuarterlyUpper</span><br><span class="line">        var currentQuarterlyUpperline = line.new(x1 = lastdailyStart, x2 = right_bar, y1 = quarterlyUpper, y2 = quarterlyUpper, color = currentQuarterlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var currentQuarterlyUpperlabel = label.new(x = right_bar, y = quarterlyUpper, text = &#x27;qVWAP +1&#x27;, tooltip = str.tostring(quarterlyUpper, format_level), color = label_color_setting, textcolor = currentQuarterlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    // Yearly</span><br><span class="line">    if enablecurrentyearlyLower</span><br><span class="line">        var currentyearlyLowerline = line.new(x1 = lastdailyStart, y1 = yearlyLower, x2 = right_bar, y2 = yearlyLower, color = currentyearlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var currentyearlyLowerlabel = label.new(x = right_bar, y = yearlyLower, text = &#x27;yVWAP -1&#x27;, tooltip = str.tostring(yearlyLower, format_level), color = label_color_setting, textcolor = currentyearlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentyearlyPOC</span><br><span class="line">        var currentyearlyPOCline = line.new(x1 = lastdailyStart, y1 = yearlyVWAP, x2 = right_bar, y2 = yearlyVWAP, color = currentyearlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var currentyearlyPOClabel = label.new(x = right_bar, y = yearlyVWAP, text = &#x27;yVWAP&#x27;, tooltip = str.tostring(yearlyVWAP, format_level), color = label_color_setting, textcolor = currentyearlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablecurrentyearlyUpper</span><br><span class="line">        var currentyearlyUpperline = line.new(x1 = lastdailyStart, y1 = yearlyUpper, x2 = right_bar, y2 = yearlyUpper, color = currentyearlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var currentyearlyUpperlabel = label.new(x = right_bar, y = yearlyUpper, text = &#x27;yVWAP +1&#x27;, tooltip = str.tostring(yearlyUpper, format_level), color = label_color_setting, textcolor = currentyearlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastYearlyLower</span><br><span class="line">        var lastyearlyLowerline = line.new(x1 = lastdailyStart, y1 = lastYearlyLower, x2 = right_bar, y2 = lastYearlyLower, color = lastYearlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastyearlyLowerlabel = label.new(x = right_bar, y = lastYearlyLower, text = &#x27;pyVWAP -1&#x27;, tooltip = str.tostring(lastYearlyLower, format_level), color = label_color_setting, textcolor = lastYearlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastYearlyPOC</span><br><span class="line">        var lastyearlyPOCline = line.new(x1 = lastdailyStart, y1 = lastYearlyPOC, x2 = right_bar, y2 = lastYearlyPOC, color = lastYearlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastyearlyPOClabel = label.new(x = right_bar, y = lastYearlyPOC, text = &#x27;pyVWAP&#x27;, tooltip = str.tostring(lastYearlyPOC, format_level), color = label_color_setting, textcolor = lastYearlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    if enablelastYearlyUpper</span><br><span class="line">        var lastyearlyUpperline = line.new(x1 = lastdailyStart, y1 = lastYearlyUpper, x2 = right_bar, y2 = lastYearlyUpper, color = lastYearlyColor, width = 1, style = DEFAULT_LINE_STYLE)</span><br><span class="line">        var lastyearlyUpperlabel = label.new(x = right_bar, y = lastYearlyUpper, text = &#x27;pyVWAP +1&#x27;, tooltip = str.tostring(lastYearlyUpper, format_level), color = label_color_setting, textcolor = lastYearlyColor, style = DEFAULT_LABEL_STYLE, xloc = xloc.bar_index, text_font_family = font.family_monospace)</span><br><span class="line">    </span><br></pre></td></tr></table></figure>


    
  </div>

</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">🌹</span>
      <div class="donation-body">
        <div class="tip text-center">加油，越来越好</div>
        <ul>
        
          <li class="item">
            
            <img src="/images/bch.png" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2025/202501003/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2025/202501005/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              rel="noopener noreferrer"
              target="_self"
              >
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    

  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

  <!-- 雪花特效-2023-08-20 -->
  <script type="text/javascript" src="\js\snow.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/hijiki.model.json"},"display":{"position":"left","width":150,"height":300,"hOffset":-15,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":1},"log":false});</script></body>
</html>
